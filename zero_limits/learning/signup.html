<?php
$fullname = $email = $username = $address = $contact_number = "";
$username_error = $password_error = "";

if ($_SERVER["REQUEST_METHOD"] === "POST") {
    $conn = new mysqli("localhost", "root", "", "assignment_db");
    if ($conn->connect_error) die("Connection failed: " . $conn->connect_error);
$fullname = trim($_POST['fullname']); $email = trim($_POST['email']); $username
= trim($_POST['username']); $password = $_POST['password']; $confirm_password =
$_POST['confirm_password']; $address = trim($_POST['address']); $contact_number
= trim($_POST['contact_number']); $stmt = $conn->prepare("SELECT username FROM
users WHERE username = ?"); $stmt->bind_param("s", $username); $stmt->execute();
$stmt->store_result(); if ($stmt->num_rows > 0) { $username_error = "Username
already exists."; } $stmt->close(); if ($password !== $confirm_password) {
$password_error = "Passwords do not match."; } if (empty($username_error) &&
empty($password_error)) { $hashed_password = password_hash($password,
PASSWORD_DEFAULT); $stmt = $conn->prepare("INSERT INTO users (fullname, email,
username, password, address, contact_number) VALUES (?, ?, ?, ?, ?, ?)");
$stmt->bind_param("ssssss", $fullname, $email, $username, $hashed_password,
$address, $contact_number); if ($stmt->execute()) { header("Location:
profile.php?username=" . urlencode($username)); exit(); } else { $username_error
= "Something went wrong. Try again."; } $stmt->close(); } $conn->close(); } ?>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sign Up | Zero Limits</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      .error {
        color: red;
        font-size: 0.9em;
        margin-top: 4px;
      }
    </style>
  </head>
  <body class="signup-body">
    <div class="top-bar">
      <header>
        <img src="images/logo.png" alt="Logo" class="logo" />
        <div class="title-group">
          <h1>Zero <span class="highlight">Limits</span></h1>
          <p class="slogan">Create your free account</p>
        </div>
      </header>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="#">About us</a></li>
          <li><a href="#">Products</a></li>
          <li><a href="signup.php">Sign Up</a></li>
          <li><a href="login.php">Sign in</a></li>
        </ul>
      </nav>
    </div>

    <main>
      <section class="signup-section">
        <div class="signup-form">
          <h2 style="color: #ffcc00">Create Your Account</h2>
          <form action="signup.php" method="POST">
            <table>
              <tr>
                <td>
                  <label for="fullname"><b>Full Name:</b></label>
                </td>
                <td>
                  <input
                    type="text"
                    name="fullname"
                    id="fullname"
                    required
                    value="<?= htmlspecialchars($fullname) ?>"
                  />
                </td>
              </tr>
              <tr>
                <td>
                  <label for="email"><b>Email Address:</b></label>
                </td>
                <td>
                  <input
                    type="email"
                    name="email"
                    id="email"
                    required
                    value="<?= htmlspecialchars($email) ?>"
                  />
                </td>
              </tr>
              <tr>
                <td>
                  <label for="username"><b>Username:</b></label>
                </td>
                <td>
                  <input
                    type="text"
                    name="username"
                    id="username"
                    required
                    value="<?= htmlspecialchars($username) ?>"
                  />
                  <?php if (!empty($username_error)): ?>
                  <div class="error"><?= $username_error ?></div>
                  <?php endif; ?>
                </td>
              </tr>
              <tr>
                <td>
                  <label for="password"><b>Password:</b></label>
                </td>
                <td>
                  <input
                    type="password"
                    name="password"
                    id="password"
                    required
                  />
                </td>
              </tr>
              <tr>
                <td>
                  <label for="confirm_password"><b>Confirm Password:</b></label>
                </td>
                <td>
                  <input
                    type="password"
                    name="confirm_password"
                    id="confirm_password"
                    required
                  />
                  <?php if (!empty($password_error)): ?>
                  <div class="error"><?= $password_error ?></div>
                  <?php endif; ?>
                </td>
              </tr>
              <tr>
                <td>
                  <label for="address"><b>Shipping Address:</b></label>
                </td>
                <td>
                  <input
                    type="text"
                    name="address"
                    id="address"
                    required
                    value="<?= htmlspecialchars($address) ?>"
                  />
                </td>
              </tr>
              <tr>
                <td>
                  <label for="contact_number"><b>Contact Number:</b></label>
                </td>
                <td>
                  <input
                    type="text"
                    name="contact_number"
                    id="contact_number"
                    required
                    value="<?= htmlspecialchars($contact_number) ?>"
                  />
                </td>
              </tr>
              <tr>
                <td colspan="2" style="text-align: center">
                  <input type="submit" value="Sign Up" class="signup" />
                </td>
              </tr>
            </table>
          </form>
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 Zero Limits. All rights reserved.</p>
    </footer>
  </body>
</html>
